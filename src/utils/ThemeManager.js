export const THEME_PROFILES = [
  {
    id: 'gold-monochrome',
    name: 'Gold Monochrome',
    family: 'Monochrome',
    mode: 'dark',
    tokens: {
      '--bg-top': '#0a0a0b',
      '--bg-bottom': '#1a1a1f',
      '--panel': '#16181d',
      '--border': '#2a2f37',
      '--primary': '#D7B38C',
      '--primary-contrast': '#0a0a0b',
      '--hero-bg': '#D7B38C',
      '--hero-text': '#0a0a0b',
      '--text-primary': '#EAECEF',
      '--text-secondary': '#B8C0CC',
      '--accent': '#D7B38C',
      '--accent-2': '#B88F63',
      '--success': '#4ade80',
      '--warning': '#f59e0b',
      '--danger': '#ef4444',
      '--glow': 'rgba(215,179,140,0.35)'
    }
  },
  {
    id: 'royal-depths',
    name: 'Royal Depths',
    family: 'Split-Complementary',
    mode: 'dark',
    tokens: {
      '--bg-top': '#0d0b15',
      '--bg-bottom': '#1a0f2e',
      '--panel': '#151220',
      '--border': '#2d2440',
      '--primary': '#151220',
      '--primary-contrast': '#F8F7FF',
      '--hero-bg': '#151220',
      '--hero-text': '#F8F7FF',
      '--text-primary': '#F8F7FF',
      '--text-secondary': '#D4CFEA',
      '--accent': '#8B5CF6',
      '--accent-2': '#F59E0B',
      '--success': '#10B981',
      '--warning': '#F59E0B',
      '--danger': '#EF4444',
      '--glow': 'rgba(139,92,246,0.4)'
    }
  },
  {
    id: 'midnight-rose',
    name: 'Midnight Rose',
    family: 'Complementary',
    mode: 'dark',
    tokens: {
      '--bg-top': '#1a0b14',
      '--bg-bottom': '#2d1327',
      '--panel': '#241520',
      '--border': '#3d2235',
      '--primary': '#241520',
      '--primary-contrast': '#FDF2F8',
      '--hero-bg': '#241520',
      '--hero-text': '#FDF2F8',
      '--text-primary': '#FDF2F8',
      '--text-secondary': '#F9A8D4',
      '--accent': '#EC4899',
      '--accent-2': '#10B981',
      '--success': '#22C55E',
      '--warning': '#F59E0B',
      '--danger': '#EF4444',
      '--glow': 'rgba(236,72,153,0.35)'
    }
  },
  {
    id: 'solar-eclipse',
    name: 'Solar Eclipse',
    family: 'Double Complementary',
    mode: 'dark',
    tokens: {
      '--bg-top': '#1a1205',
      '--bg-bottom': '#33240a',
      '--panel': '#221808',
      '--border': '#4a3317',
      '--primary': '#221808',
      '--primary-contrast': '#FFFDE7',
      '--hero-bg': '#221808',
      '--hero-text': '#FFFDE7',
      '--text-primary': '#FFFDE7',
      '--text-secondary': '#FFF8C4',
      '--accent': '#FFD700',
      '--accent-2': '#191970',
      '--success': '#32CD32',
      '--warning': '#FF8C00',
      '--danger': '#DC143C',
      '--glow': 'rgba(255,215,0,0.4)'
    }
  },
  {
    id: 'neon-synthwave',
    name: 'Neon Synthwave',
    family: 'Tetradic',
    mode: 'dark',
    tokens: {
      '--bg-top': '#0d0d1a',
      '--bg-bottom': '#1a1a33',
      '--panel': '#141426',
      '--border': '#2d2d4a',
      '--primary': '#141426',
      '--primary-contrast': '#F8F8FF',
      '--hero-bg': '#141426',
      '--hero-text': '#F8F8FF',
      '--text-primary': '#F8F8FF',
      '--text-secondary': '#E6E6FA',
      '--accent': '#FF1493',
      '--accent-2': '#00FF7F',
      '--success': '#00FF7F',
      '--warning': '#FF4500',
      '--danger': '#FF1493',
      '--glow': 'rgba(255,20,147,0.5)'
    }
  },
  {
    id: 'crimson-depths',
    name: 'Crimson Depths',
    family: 'Triadic',
    mode: 'dark',
    tokens: {
      '--bg-top': '#1a0510',
      '--bg-bottom': '#330a1f',
      '--panel': '#220815',
      '--border': '#4a1b2e',
      '--primary': '#220815',
      '--primary-contrast': '#FFE4E9',
      '--hero-bg': '#220815',
      '--hero-text': '#FFE4E9',
      '--text-primary': '#FFE4E9',
      '--text-secondary': '#FFCDD2',
      '--accent': '#DC143C',
      '--accent-2': '#00695C',
      '--success': '#1976D2',
      '--warning': '#FF8F00',
      '--danger': '#D32F2F',
      '--glow': 'rgba(220,20,60,0.45)'
    }
  },
  {
    id: 'champagne-light',
    name: 'Champagne Light',
    family: 'Monochrome',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#f8f6f3',
      '--panel': '#ffffff',
      '--border': '#e5e1dc',
      '--primary': '#ffffff',
      '--primary-contrast': '#2D2A26',
      '--hero-bg': '#ffffff',
      '--hero-text': '#B8860B',
      '--text-primary': '#2D2A26',
      '--text-secondary': '#5C5852',
      '--accent': '#B8860B',
      '--accent-2': '#8B6914',
      '--success': '#16A34A',
      '--warning': '#D97706',
      '--danger': '#DC2626',
      '--glow': 'rgba(184,134,11,0.15)'
    }
  },
  {
    id: 'ocean-breeze',
    name: 'Ocean Breeze',
    family: 'Complementary',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#f0fdfa',
      '--panel': '#ffffff',
      '--border': '#ccfbf1',
      '--primary': '#ffffff',
      '--primary-contrast': '#134E4A',
      '--hero-bg': '#ffffff',
      '--hero-text': '#0D9488',
      '--text-primary': '#134E4A',
      '--text-secondary': '#0F766E',
      '--accent': '#0D9488',
      '--accent-2': '#EA580C',
      '--success': '#059669',
      '--warning': '#D97706',
      '--danger': '#DC2626',
      '--glow': 'rgba(13,148,136,0.2)'
    }
  },
  {
    id: 'azure-sky',
    name: 'Azure Sky',
    family: 'Tetradic',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#eff6ff',
      '--panel': '#ffffff',
      '--border': '#dbeafe',
      '--primary': '#ffffff',
      '--primary-contrast': '#1E3A8A',
      '--hero-bg': '#ffffff',
      '--hero-text': '#3B82F6',
      '--text-primary': '#1E3A8A',
      '--text-secondary': '#1D4ED8',
      '--accent': '#3B82F6',
      '--accent-2': '#F97316',
      '--success': '#059669',
      '--warning': '#D97706',
      '--danger': '#DC2626',
      '--glow': 'rgba(59,130,246,0.15)'
    }
  },
  {
    id: 'midnight-sky',
    name: 'Midnight Sky',
    family: 'Monochrome',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#eef2ff',
      '--panel': '#ffffff',
      '--border': '#c7d2fe',
      '--primary': '#ffffff',
      '--primary-contrast': '#312E81',
      '--hero-bg': '#ffffff',
      '--hero-text': '#6366F1',
      '--text-primary': '#312E81',
      '--text-secondary': '#3730A3',
      '--accent': '#6366F1',
      '--accent-2': '#8B5CF6',
      '--success': '#10B981',
      '--warning': '#F59E0B',
      '--danger': '#EF4444',
      '--glow': 'rgba(99,102,241,0.12)'
    }
  },
  {
    id: 'coral-sunset',
    name: 'Coral Sunset',
    family: 'Analogous',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#fff7ed',
      '--panel': '#ffffff',
      '--border': '#fed7aa',
      '--primary': '#ffffff',
      '--primary-contrast': '#9A3412',
      '--hero-bg': '#ffffff',
      '--hero-text': '#EA580C',
      '--text-primary': '#9A3412',
      '--text-secondary': '#C2410C',
      '--accent': '#EA580C',
      '--accent-2': '#DC2626',
      '--success': '#059669',
      '--warning': '#D97706',
      '--danger': '#DC2626',
      '--glow': 'rgba(234,88,12,0.15)'
    }
  },
  {
    id: 'spring-meadow',
    name: 'Spring Meadow',
    family: 'Triadic',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#f0fdf4',
      '--panel': '#ffffff',
      '--border': '#dcfce7',
      '--primary': '#ffffff',
      '--primary-contrast': '#14532D',
      '--hero-bg': '#ffffff',
      '--hero-text': '#22C55E',
      '--text-primary': '#14532D',
      '--text-secondary': '#166534',
      '--accent': '#22C55E',
      '--accent-2': '#EC4899',
      '--success': '#16A34A',
      '--warning': '#D97706',
      '--danger': '#DC2626',
      '--glow': 'rgba(34,197,94,0.15)'
    }
  },
  {
    id: 'golden-hour',
    name: 'Golden Hour',
    family: 'Monochrome',
    mode: 'light',
    tokens: {
      '--bg-top': '#fffef7',
      '--bg-bottom': '#fff8e1',
      '--panel': '#ffffff',
      '--border': '#f3e5ab',
      '--primary': '#ffffff',
      '--primary-contrast': '#5D4E37',
      '--hero-bg': '#ffffff',
      '--hero-text': '#DAA520',
      '--text-primary': '#5D4E37',
      '--text-secondary': '#8B7355',
      '--accent': '#DAA520',
      '--accent-2': '#B8860B',
      '--success': '#2E7D32',
      '--warning': '#F57C00',
      '--danger': '#C62828',
      '--glow': 'rgba(218,165,32,0.2)'
    }
  },
  {
    id: 'rose-gold',
    name: 'Rose Gold',
    family: 'Analogous',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#fff1f2',
      '--panel': '#ffffff',
      '--border': '#fecdd3',
      '--primary': '#ffffff',
      '--primary-contrast': '#881337',
      '--hero-bg': '#ffffff',
      '--hero-text': '#FB7185',
      '--text-primary': '#881337',
      '--text-secondary': '#BE123C',
      '--accent': '#FB7185',
      '--accent-2': '#F97316',
      '--success': '#10B981',
      '--warning': '#F59E0B',
      '--danger': '#EF4444',
      '--glow': 'rgba(251,113,133,0.15)'
    }
  },
  {
    id: 'cherry-blossom',
    name: 'Cherry Blossom',
    family: 'Complementary',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#fdf2f8',
      '--panel': '#ffffff',
      '--border': '#fbcfe8',
      '--primary': '#ffffff',
      '--primary-contrast': '#831843',
      '--hero-bg': '#ffffff',
      '--hero-text': '#EC4899',
      '--text-primary': '#831843',
      '--text-secondary': '#BE185D',
      '--accent': '#EC4899',
      '--accent-2': '#10B981',
      '--success': '#059669',
      '--warning': '#D97706',
      '--danger': '#DC2626',
      '--glow': 'rgba(236,72,153,0.15)'
    }
  },
  {
    id: 'peach-blossom',
    name: 'Peach Blossom',
    family: 'Analogous',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#fef2f2',
      '--panel': '#ffffff',
      '--border': '#fecaca',
      '--primary': '#ffffff',
      '--primary-contrast': '#7F1D1D',
      '--hero-bg': '#ffffff',
      '--hero-text': '#F87171',
      '--text-primary': '#7F1D1D',
      '--text-secondary': '#B91C1C',
      '--accent': '#F87171',
      '--accent-2': '#FB923C',
      '--success': '#10B981',
      '--warning': '#F59E0B',
      '--danger': '#EF4444',
      '--glow': 'rgba(248,113,113,0.15)'
    }
  },
  {
    id: 'teal-breeze',
    name: 'Teal Breeze',
    family: 'Complementary',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#f0fdfa',
      '--panel': '#ffffff',
      '--border': '#99f6e4',
      '--primary': '#ffffff',
      '--primary-contrast': '#134E4A',
      '--hero-bg': '#ffffff',
      '--hero-text': '#14B8A6',
      '--text-primary': '#134E4A',
      '--text-secondary': '#0F766E',
      '--accent': '#14B8A6',
      '--accent-2': '#EF4444',
      '--success': '#10B981',
      '--warning': '#F59E0B',
      '--danger': '#DC2626',
      '--glow': 'rgba(20,184,166,0.12)'
    }
  },
  {
    id: 'cotton-candy',
    name: 'Cotton Candy',
    family: 'Analogous',
    mode: 'light',
    tokens: {
      '--bg-top': '#fefefe',
      '--bg-bottom': '#fef7ff',
      '--panel': '#ffffff',
      '--border': '#f3e8ff',
      '--primary': '#ffffff',
      '--primary-contrast': '#4C1D95',
      '--hero-bg': '#ffffff',
      '--hero-text': '#A855F7',
      '--text-primary': '#4C1D95',
      '--text-secondary': '#6B21A8',
      '--accent': '#A855F7',
      '--accent-2': '#EC4899',
      '--success': '#10B981',
      '--warning': '#F59E0B',
      '--danger': '#EF4444',
      '--glow': 'rgba(168,85,247,0.12)'
    }
  }
];

const THEME_ALIASES = {
  'teal-complementary': 'teal-breeze',
  'emerald-forest': 'spring-meadow',
  'cosmic-blue': 'midnight-sky',
  'sunset-warmth': 'coral-sunset',
  'cyber-neon': 'neon-synthwave',
  'amber-twilight': 'solar-eclipse',
  'abyssal-depths': 'royal-depths',
  'violet-storm': 'royal-depths',
  'royal-purple': 'royal-depths',
  'lavender-dream-light': 'cotton-candy',
  'minimal-light': 'champagne-light',
  'steel-light': 'azure-sky',
  'coffee-cream-light': 'golden-hour',
  'mint-fresh-light': 'teal-breeze',
  'cloud-nine-light': 'azure-sky',
  'desert-sand-light': 'golden-hour',
  'amethyst-light': 'cotton-candy',
  'citrus-splash-light': 'spring-meadow',
  'sage-berry-light': 'spring-meadow',
  'emerald-garden-light': 'spring-meadow',
  'honey-glow-light': 'golden-hour',
  'ocean-breeze-light': 'ocean-breeze',
  'azure-sky-light': 'azure-sky',
  'midnight-sky-light': 'midnight-sky',
  'coral-sunset-light': 'coral-sunset',
  'spring-meadow-light': 'spring-meadow',
  'golden-hour-light': 'golden-hour',
  'rose-gold-light': 'rose-gold',
  'cherry-blossom-light': 'cherry-blossom',
  'peach-blossom-light': 'peach-blossom',
  'teal-breeze-light': 'teal-breeze',
  'cotton-candy-light': 'cotton-candy'
};

export function applyThemeToRoot(tokens, meta = {}) {
  const root = document.documentElement;
  Object.entries(tokens).forEach(([key, value]) => {
    root.style.setProperty(key, value);
  });
  if (meta.mode) {
    root.setAttribute('data-theme-mode', meta.mode);
  } else {
    root.removeAttribute('data-theme-mode');
  }
  if (meta.id) {
    root.setAttribute('data-theme-id', meta.id);
  } else {
    root.removeAttribute('data-theme-id');
  }
}

export function getStoredTheme() {
  return localStorage.getItem('themeProfile') || 'gold-monochrome';
}

export function setStoredTheme(themeId) {
  localStorage.setItem('themeProfile', themeId);
}

export function getCurrentTheme(themeId) {
  const normalized = THEME_ALIASES[themeId] || themeId;
  return THEME_PROFILES.find(t => t.id === normalized) || THEME_PROFILES[0];
}

export function getThemesByMode(mode) {
  return THEME_PROFILES.filter(theme => theme.mode === mode);
}

export function getThemesByFamily(family) {
  return THEME_PROFILES.filter(theme => theme.family === family);
}

export function hexToRgb(hex) {
  const h = hex.replace('#', '');
  const bigint = parseInt(h.length === 3 ? h.split('').map(c => c + c).join('') : h, 16);
  const r = (bigint >> 16) & 255;
  const g = (bigint >> 8) & 255;
  const b = bigint & 255;
  return { r, g, b };
}

export function rgbaFromHex(hex, alpha) {
  const { r, g, b } = hexToRgb(hex);
  return `rgba(${r}, ${g}, ${b}, ${alpha})`;
}

export function getContrastRatio(color1, color2) {
  const getLuminance = (hex) => {
    const { r, g, b } = hexToRgb(hex);
    const [rs, gs, bs] = [r, g, b].map(c => {
      const channel = c / 255;
      return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);
    });
    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
  };
  const lum1 = getLuminance(color1);
  const lum2 = getLuminance(color2);
  const brightest = Math.max(lum1, lum2);
  const darkest = Math.min(lum1, lum2);
  return (brightest + 0.05) / (darkest + 0.05);
}
